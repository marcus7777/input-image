<link rel="import" href="../image-base64/image-base64.html">
<link rel="import" href="../load-image/load-image.html">
<!--
  `<input-image></input-image>` Convert and resize an image to the size you need and exposes it is a string
  @demo demo.html
-->
<dom-module id="input-image">
  <template>
    <template is="dom-if" if="{{value}}">
      <img src="{{value}}" on-load="ready" on-tap="remove" />
    </template>
    <template is="dom-if" if="{{!value}}">
      <load-image orientation="{{orientation}}" label="{{label}}" src="{{big}}"></load-image>
    </template>
    <template is="dom-if" if="{{big}}">
      <image-base64 hidden="{{!value}}" orientation="[[orientation]]" url="{{big}}" base64="{{value}}" width="[[width]]" max-height="{{maxHeight}}" max-width="[[maxWidth]]"></image-base64>
    </template>
  </template>
</dom-module>
<script>
  Polymer({
    is: "input-image",
    properties:{
      value:{
        notify: true, type: String, value: "",
      },
      width: {
        value: 200, type:Number,
      },
      big: {
        type: String
      }
    },
    remove: function (){
      this.big = ""
      this.value = ""
      this.set("width", 200)
      this.orientation = ""
    },
    ready: function (){
      if (!this.big) {
        this.big = this.value
      } else if (this.big !== this.value) {
        this.big = this.value
      }
    },
  })
</script>
